<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Street Sounds Recorder</title>
  <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet">
  <script
  src="https://code.jquery.com/jquery-3.3.1.min.js"
  integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
  crossorigin="anonymous"></script>
  <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
  <script src="js/recorder.js"></script>
  <style>
    :root {
      --page-width: 600px;
      --rec-btn-size: 60px;
    }
    body, html {
      font-family: 'Raleway', sans-serif;
      margin: 0px;
      padding: 0px;
    }
    .centerDiv {
      width: var(--page-width);
      margin: auto;
    }
    a {
      color: black;
    }
    h1 {
      font-size: 73px;
      margin-bottom: 0;
    }
    audio { 
      width: var(--page-width);
      margin-top: 20px;
      margin-bottom: 20px;
    }
    canvas {
      width: var(--page-width);
    }
    .controlBtn {
      color: white;
      font-size: 14px;
      outline: none;
      background-color: black;
      width: var(--page-width);
      height: var(--rec-btn-size);
      background: linear-gradient(90deg, #000000 100%, #ffffff 0%);
    }
    .controlBtn:disabled {
      color: grey;
      background-color: black;
    }
    #recordBtn[recording="true"] {
      background-color: red;
      animation-name: countDown;
      animation-duration: 8s;
    }
    #playerContainer {  
    }
    #finalQrs img {
      max-width:100%;
      max-height:100%;
    }
    #buttonsContainer {
      display: flex;
    }
    #buttonsContainer button {
      margin: 3px;      
    }
    @keyframes countDown {
      /* for (let i = 0; i <= 100; i += 100/25) { console.log(`${i}% {background: linear-gradient(90deg, #000000 ${100 - i}%, #ffffff 0%);}`) } */
      0% {background: linear-gradient(90deg, #000000 100%, #ffffff 0%);}
      4% {background: linear-gradient(90deg, #000000 96%, #ffffff 0%);}
      8% {background: linear-gradient(90deg, #000000 92%, #ffffff 0%);}
      12% {background: linear-gradient(90deg, #000000 88%, #ffffff 0%);}
      16% {background: linear-gradient(90deg, #000000 84%, #ffffff 0%);}
      20% {background: linear-gradient(90deg, #000000 80%, #ffffff 0%);}
      24% {background: linear-gradient(90deg, #000000 76%, #ffffff 0%);}
      28% {background: linear-gradient(90deg, #000000 72%, #ffffff 0%);}
      32% {background: linear-gradient(90deg, #000000 68%, #ffffff 0%);}
      36% {background: linear-gradient(90deg, #000000 64%, #ffffff 0%);}
      40% {background: linear-gradient(90deg, #000000 60%, #ffffff 0%);}
      44% {background: linear-gradient(90deg, #000000 56%, #ffffff 0%);}
      48% {background: linear-gradient(90deg, #000000 52%, #ffffff 0%);}
      52% {background: linear-gradient(90deg, #000000 48%, #ffffff 0%);}
      56% {background: linear-gradient(90deg, #000000 44%, #ffffff 0%);}
      60% {background: linear-gradient(90deg, #000000 40%, #ffffff 0%);}
      64% {background: linear-gradient(90deg, #000000 36%, #ffffff 0%);}
      68% {background: linear-gradient(90deg, #000000 32%, #ffffff 0%);}
      72% {background: linear-gradient(90deg, #000000 28%, #ffffff 0%);}
      76% {background: linear-gradient(90deg, #000000 24%, #ffffff 0%);}
      80% {background: linear-gradient(90deg, #000000 20%, #ffffff 0%);}
      84% {background: linear-gradient(90deg, #000000 16%, #ffffff 0%);}
      88% {background: linear-gradient(90deg, #000000 12%, #ffffff 0%);}
      92% {background: linear-gradient(90deg, #000000 8%, #ffffff 0%);}
      96% {background: linear-gradient(90deg, #000000 4%, #ffffff 0%);}
      100% {background: linear-gradient(90deg, #000000 0%, #ffffff 0%);}
    }
  </style>
</head>

<body>

  <div class="centerDiv">
    <h1>STREET SOUNDS</h1>
    <canvas id="analyser" width="400" height="200"></canvas>
    
    <audio id="player" controls></audio>      
    
    <div id="buttonsContainer">
      <button class="controlBtn" id="recordBtn" recording="false"> RECORD </button>
      <button class="controlBtn" id="saveQrBtn" recording="false" disabled> MAKE QR </button>
    </div>
    
    <!-- <a id="save" href="#">Download</a> -->
    <div id="finalQrs"></div>
  </div>

</body>

<script src="js/index.js"></script>

</html>